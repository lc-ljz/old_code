import _,{AsideSection as v}from"./Aside.js";import o,{useCallback as b,useMemo as s,useState as k}from"../../web_modules/react.js";import{ellipsis as N,em as c,rem as f,size as L}from"../utils/style.js";import g from"./Checkbox.js";import q from"./Field.js";import I from"./Loader/RunList.js";import T from"./RunningToggle.js";import B from"./SearchInput.js";import F from"../../web_modules/styled-components.js";import z from"../../web_modules/lodash/uniqBy.js";import{useTranslation as C}from"../../web_modules/react-i18next.js";const M=F(_).withConfig({displayName:"RunAside__StyledAside",componentId:"sc-1k1mq1t-0"})(["",".run-section{flex:auto;overflow-x:hidden;overflow-y:auto;display:flex;flex-direction:column;margin-bottom:0;.run-select{flex:auto;overflow-x:hidden;overflow-y:auto;display:flex;flex-direction:column;> *{flex:none;}.search-input{margin-bottom:",";}.run-list{flex:auto;overflow-x:hidden;overflow-y:auto;margin-top:",";> div{margin-top:",";> *{width:100%;}.run-item{display:flex;align-items:center;"," > i{display:inline-block;",";border-radius:",";margin-right:",";}}}}}}"],v,f(15),f(5),f(11),N(),L(c(12),c(12)),c(6),c(8)),O=({runs:l,selectedRuns:t,onChangeRuns:a,running:p,onToggleRunning:u,loading:x,children:y})=>{const{t:d}=C("common"),[n,h]=k(""),w=s(()=>(l==null?void 0:l.length)===(t==null?void 0:t.length),[l,t]),E=b(e=>{a==null||a(e?l!=null?l:[]:[])},[a,l]),j=s(()=>{var e;return(e=n?l==null?void 0:l.filter(m=>m.label.indexOf(n)>=0):l)!==null&&e!==void 0?e:[]},[l,n]),A=b((e,m)=>{let i=t!=null?t:[];m?i=z([...i,e],r=>r.label):i=i.filter(r=>r.label!==e.label),a==null||a(i)},[a,t]),S=s(()=>o.createElement(T,{className:"running-toggle",running:p,onToggle:u}),[p,u]);return o.createElement(M,{bottom:S},y,o.createElement(v,{className:"run-section"},o.createElement(q,{className:"run-select",label:d("common:select-runs")},o.createElement(B,{className:"search-input",value:n,onChange:h,placeholder:d("common:search-runs"),rounded:!0}),o.createElement(g,{value:w,onChange:E},d("common:select-all")),o.createElement("div",{className:"run-list"},x?o.createElement(I,null):j.map((e,m)=>{var i;return o.createElement("div",{key:m},o.createElement(g,{value:t==null||(i=t.map(r=>r.label))===null||i===void 0?void 0:i.includes(e.label),title:e.label,onChange:r=>A(e,r)},o.createElement("span",{className:"run-item"},o.createElement("i",{style:{backgroundColor:e.colors[0]}}),e.label)))})))))};export default O;
