import e,{useCallback as a,useEffect as _,useRef as u,useState as I}from"../../../web_modules/react.js";import{Trans as f,useTranslation as T}from"../../../web_modules/react-i18next.js";import{borderRadius as j,em as l,rem as o,size as P,transitionProps as h,zIndexes as z}from"../../utils/style.js";import g from"../Button.js";import D from"../Icon.js";import b from"../../../web_modules/styled-components.js";const U=b.div.withConfig({displayName:"UploadDialog__Dialog",componentId:"n57xm1-0"})(["position:fixed;top:0;left:0;width:100vw;height:100vh;overscroll-behavior:none;background-color:var(--dark-mask-color);z-index:",";"," > .modal{width:",";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);box-shadow:0 2px 20px 0 rgba(0,0,0,0.08);background-color:var(--background-color);border-radius:",";"," > .modal-header{padding:0 ",";height:",";line-height:",";text-align:center;font-size:",";font-weight:700;position:relative;border-bottom:1px solid var(--border-color);> .modal-close{position:absolute;right:0;"," line-height:",";font-size:",";text-align:center;cursor:pointer;color:var(--text-lighter-color);}}> .modal-body{margin:"," 0;height:",";}}"],z.dialog,h("background-color"),o(700),j,h("background-color"),l(40,16),l(55,16),l(55,16),l(16),P(l(55,16),l(55,16)),l(55,16),l(20,16),o(40),o(314)),L=`0.1\\t0.2\\t0.5\\t0.9
0.2\\t0.1\\t5.0\\t0.2
0.4\\t0.1\\t7.0\\t0.8`,V=`Pok\xE9mon\\tSpecies
Wartortle\\tTurtle
Venusaur\\tSeed
Charmeleon\\tFlame`,R=b.div.withConfig({displayName:"UploadDialog__Uploader",componentId:"n57xm1-1"})(["width:100%;height:100%;display:flex;align-items:stretch;justify-content:space-between;> .item{flex:1;padding:0 ",";display:flex;flex-direction:column;align-items:flex-start;justify-content:space-between;&:not(:last-child){border-right:1px solid var(--border-color);}.desc{height:30%;line-height:1.7;.tip{color:var(--text-light-color);}}pre{height:40%;margin:0;padding:"," ",";color:var(--code-color);background-color:var(--code-background-color);}}"],o(40),o(30),o(40)),A=({open:d,hasVector:v,onClose:i,onChangeVectorFile:n,onChangeMetadataFile:r})=>{const{t:m}=T("high-dimensional"),[E,y]=I(!!d);_(()=>y(!!d),[d]);const x=a(()=>i==null?void 0:i(),[i]),s=u(null),c=u(null),k=a(p=>{const t=p.target;t&&t.files&&t.files.length&&(n==null||n(t.files[0]))},[n]),w=a(p=>{const t=p.target;t&&t.files&&t.files.length&&(r==null||r(t.files[0]))},[r]),N=a(()=>{s.current&&(s.current.value="",s.current.click())},[]),S=a(()=>{c.current&&(c.current.value="",c.current.click())},[]);return E?e.createElement(U,null,e.createElement("div",{className:"modal"},e.createElement("div",{className:"modal-header"},m("high-dimensional:upload-from-computer"),e.createElement("a",{className:"modal-close",onClick:x},e.createElement(D,{type:"close"}))),e.createElement("div",{className:"modal-body"},e.createElement(R,null,e.createElement("div",{className:"item"},e.createElement("div",{className:"desc"},e.createElement(f,{i18nKey:"high-dimensional:upload.step1"},"Step 1: Load a TSV file of vectors.",e.createElement("br",null),"Example of 3 vectors with dimension 4:")),e.createElement("pre",null,L),e.createElement(g,{type:"primary",onClick:N},m("high-dimensional:select-file"))),e.createElement("div",{className:"item"},e.createElement("div",{className:"desc"},e.createElement(f,{i18nKey:"high-dimensional:upload.step2"},"Step 2 (optional): Load a TSV file of metadata.",e.createElement("br",null),"Example of 3 data points and 2 columns.",e.createElement("br",null),e.createElement("span",{className:"tip"},"Note: If there is more than one column, the first row will be parsed as column labels."))),e.createElement("pre",null,V),e.createElement(g,{type:"primary",disabled:!v,onClick:S},m("high-dimensional:select-file")))))),e.createElement("input",{ref:s,type:"file",multiple:!1,onChange:k,style:{display:"none"}}),e.createElement("input",{ref:c,type:"file",multiple:!1,onChange:w,style:{display:"none"}})):null};export default A;
