function n(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}import{callListener as r,pushFunctionToListener as o,removeFunctionFromListener as l,runner as c}from"./utils.js";class a{constructor(){n(this,"listeners",{}),n(this,"onceListeners",{}),n(this,"env",{}),self.addEventListener("message",this.listener.bind(this))}listener(e){r.call(this,this.onceListeners,e.data),r.call(this,this.listeners,e.data),delete this.onceListeners[e.data.type]}emit(e,s){self.postMessage({type:e,data:s})}on(e,s){o(this.listeners,e,s)}off(e,s){l(this.listeners,e,s),l(this.onceListeners,e,s)}once(e,s){o(this.onceListeners,e,s)}}const i=new a;i.once("INITIALIZE",({name:t,env:e})=>{i.env=e,c(t,i)});
