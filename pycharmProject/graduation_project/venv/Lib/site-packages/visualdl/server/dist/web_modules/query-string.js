import{c as U}from"./common/_commonjsHelpers-4f955397.js";var $=f=>encodeURIComponent(f).replace(/[!'()*]/g,i=>`%${i.charCodeAt(0).toString(16).toUpperCase()}`),C="%[a-f0-9]{2}",w=new RegExp(C,"gi"),E=new RegExp("("+C+")+","gi");function F(f,i){try{return decodeURIComponent(f.join(""))}catch(y){}if(f.length===1)return f;i=i||1;var u=f.slice(0,i),l=f.slice(i);return Array.prototype.concat.call([],F(u),F(l))}function I(f){try{return decodeURIComponent(f)}catch(l){for(var i=f.match(w),u=1;u<i.length;u++)f=F(i,u).join(""),i=f.match(w);return f}}function D(f){for(var i={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},u=E.exec(f);u;){try{i[u[0]]=decodeURIComponent(u[0])}catch(o){var l=I(u[0]);l!==u[0]&&(i[u[0]]=l)}u=E.exec(f)}i["%C2"]="\uFFFD";for(var y=Object.keys(i),g=0;g<y.length;g++){var d=y[g];f=f.replace(new RegExp(d,"g"),i[d])}return f}var R=function(f){if(typeof f!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof f+"`");try{return f=f.replace(/\+/g," "),decodeURIComponent(f)}catch(i){return D(f)}},x=(f,i)=>{if(!(typeof f=="string"&&typeof i=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(i==="")return[f];const u=f.indexOf(i);return u===-1?[f]:[f.slice(0,u),f.slice(u+i.length)]},M=U(function(f,i){const u=r=>r==null;function l(r){switch(r.arrayFormat){case"index":return e=>(n,t)=>{const c=n.length;return t===void 0||r.skipNull&&t===null||r.skipEmptyString&&t===""?n:t===null?[...n,[d(e,r),"[",c,"]"].join("")]:[...n,[d(e,r),"[",d(c,r),"]=",d(t,r)].join("")]};case"bracket":return e=>(n,t)=>t===void 0||r.skipNull&&t===null||r.skipEmptyString&&t===""?n:t===null?[...n,[d(e,r),"[]"].join("")]:[...n,[d(e,r),"[]=",d(t,r)].join("")];case"comma":case"separator":return e=>(n,t)=>t==null||t.length===0?n:n.length===0?[[d(e,r),"=",d(t,r)].join("")]:[[n,d(t,r)].join(r.arrayFormatSeparator)];default:return e=>(n,t)=>t===void 0||r.skipNull&&t===null||r.skipEmptyString&&t===""?n:t===null?[...n,d(e,r)]:[...n,[d(e,r),"=",d(t,r)].join("")]}}function y(r){let e;switch(r.arrayFormat){case"index":return(n,t,c)=>{if(e=/\[(\d*)\]$/.exec(n),n=n.replace(/\[\d*\]$/,""),!e){c[n]=t;return}c[n]===void 0&&(c[n]={}),c[n][e[1]]=t};case"bracket":return(n,t,c)=>{if(e=/(\[\])$/.exec(n),n=n.replace(/\[\]$/,""),!e){c[n]=t;return}if(c[n]===void 0){c[n]=[t];return}c[n]=[].concat(c[n],t)};case"comma":case"separator":return(n,t,c)=>{const s=typeof t=="string"&&t.includes(r.arrayFormatSeparator),a=typeof t=="string"&&!s&&o(t,r).includes(r.arrayFormatSeparator);t=a?o(t,r):t;const m=s||a?t.split(r.arrayFormatSeparator).map(A=>o(A,r)):t===null?t:o(t,r);c[n]=m};default:return(n,t,c)=>{if(c[n]===void 0){c[n]=t;return}c[n]=[].concat(c[n],t)}}}function g(r){if(typeof r!="string"||r.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function d(r,e){return e.encode?e.strict?$(r):encodeURIComponent(r):r}function o(r,e){return e.decode?R(r):r}function h(r){return Array.isArray(r)?r.sort():typeof r=="object"?h(Object.keys(r)).sort((e,n)=>Number(e)-Number(n)).map(e=>r[e]):r}function j(r){const e=r.indexOf("#");return e!==-1&&(r=r.slice(0,e)),r}function N(r){let e="";const n=r.indexOf("#");return n!==-1&&(e=r.slice(n)),e}function b(r){r=j(r);const e=r.indexOf("?");return e===-1?"":r.slice(e+1)}function O(r,e){return e.parseNumbers&&!Number.isNaN(Number(r))&&typeof r=="string"&&r.trim()!==""?r=Number(r):e.parseBooleans&&r!==null&&(r.toLowerCase()==="true"||r.toLowerCase()==="false")&&(r=r.toLowerCase()==="true"),r}function S(r,e){e=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},e),g(e.arrayFormatSeparator);const n=y(e),t=Object.create(null);if(typeof r!="string"||(r=r.trim().replace(/^[?#&]/,""),!r))return t;for(const c of r.split("&")){let[s,a]=x(e.decode?c.replace(/\+/g," "):c,"=");a=a===void 0?null:["comma","separator"].includes(e.arrayFormat)?a:o(a,e),n(o(s,e),a,t)}for(const c of Object.keys(t)){const s=t[c];if(typeof s=="object"&&s!==null)for(const a of Object.keys(s))s[a]=O(s[a],e);else t[c]=O(s,e)}return e.sort===!1?t:(e.sort===!0?Object.keys(t).sort():Object.keys(t).sort(e.sort)).reduce((c,s)=>{const a=t[s];return Boolean(a)&&typeof a=="object"&&!Array.isArray(a)?c[s]=h(a):c[s]=a,c},Object.create(null))}i.extract=b,i.parse=S,i.stringify=(r,e)=>{if(!r)return"";e=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},e),g(e.arrayFormatSeparator);const n=a=>e.skipNull&&u(r[a])||e.skipEmptyString&&r[a]==="",t=l(e),c={};for(const a of Object.keys(r))n(a)||(c[a]=r[a]);const s=Object.keys(c);return e.sort!==!1&&s.sort(e.sort),s.map(a=>{const m=r[a];return m===void 0?"":m===null?d(a,e):Array.isArray(m)?m.reduce(t(a),[]).join("&"):d(a,e)+"="+d(m,e)}).filter(a=>a.length>0).join("&")},i.parseUrl=(r,e)=>{e=Object.assign({decode:!0},e);const[n,t]=x(r,"#");return Object.assign({url:n.split("?")[0]||"",query:S(b(r),e)},e&&e.parseFragmentIdentifier&&t?{fragmentIdentifier:o(t,e)}:{})},i.stringifyUrl=(r,e)=>{e=Object.assign({encode:!0,strict:!0},e);const n=j(r.url).split("?")[0]||"",t=i.extract(r.url),c=i.parse(t,{sort:!1}),s=Object.assign(c,r.query);let a=i.stringify(s,e);a&&(a=`?${a}`);let m=N(r.url);return r.fragmentIdentifier&&(m=`#${d(r.fragmentIdentifier,e)}`),`${n}${a}${m}`}});export default M;
