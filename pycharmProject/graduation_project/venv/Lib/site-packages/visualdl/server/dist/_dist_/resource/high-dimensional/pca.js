import b from"../../../web_modules/numeric.js";export default(l,e,n)=>{const i=l.length/e,o=[];for(let r=0;r<i;r++)o.push(Array.from(l.subarray(r*e,r*e+e)));const{dot:v,transpose:g,svd:h,div:w}=b,y=v(g(o),o),V=w(y,i),f=h(V),t=f.S;let u=0;for(let r=0;r<t.length;r++)u+=t[r];for(let r=0;r<t.length;r++)t[r]/=u;const p=f.U,A=o.map(r=>{const c=new Float32Array(n);for(let s=0;s<n;s++){let m=0;for(let a=0;a<r.length;a++)m+=r[a]*p[a][s];c[s]=m}return Array.from(c)}),d=t.slice(0,n);return{vectors:A,variance:d,totalVariance:d.reduce((r,c)=>r+c,0)}};
