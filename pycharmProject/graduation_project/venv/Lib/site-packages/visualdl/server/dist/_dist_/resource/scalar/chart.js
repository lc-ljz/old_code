import{format as v}from"../../../web_modules/d3-format.js";import{formatTime as N}from"../../utils/index.js";import w from"../../../web_modules/moment.js";import{xAxisMap as s}from"./index.js";const i=v(".5"),y=c=>{const m=w.duration(c),o=m.hours();o&&m.subtract(o,"hour");const e=m.minutes();e&&m.subtract(e,"minute");const r=m.asSeconds();let t=Math.floor(r)+"s";return o?t=`${o}h${e}m${t}`:e&&(t=`${e}m${t}`),t};export const options={legend:{data:[]},tooltip:{position:["10%","100%"]}},chartData=({data:c,ranges:m,runs:o,xAxis:e,smoothedOnly:r})=>c.map((t,l)=>{const a=o[l].label,h=o[l].colors[0],d=o[l].colors[1],p=[{name:a,z:o.length+l,itemStyle:{color:h},lineStyle:{color:h},data:t,encode:{x:[s[e]],y:[3]}}];if(!r){const n=m[l],u=t.find(f=>f[2]===(n==null?void 0:n.min)),b=t.find(f=>f[2]===(n==null?void 0:n.max));p.push({name:a,z:l,itemStyle:{color:d},lineStyle:{color:d},data:t,encode:{x:[s[e]],y:[2]},markPoint:{symbol:"circle",symbolSize:6,itemStyle:{color:"#fff",borderColor:d,borderWidth:1},label:{show:!1},data:[...u?[{coord:[u[s[e]],u[2]]}]:[],...b?[{coord:[b[s[e]],b[2]]}]:[]]}})}return p}).flat(),tooltip=(c,m,o)=>({columns:[{label:o.t("scalar:smoothed"),width:"5em"},{label:o.t("scalar:value"),width:"4.285714286em"},{label:o.t("common:time-mode.step"),width:`${Math.max(m*.571428571,2.857142857)}em`},{label:o.t("scalar:min"),width:"4.285714286em"},{label:o.t("scalar:max"),width:"4.285714286em"},{label:o.t("common:time-mode.wall"),width:"10.714285714em"},{label:o.t("common:time-mode.relative"),width:"4.285714286em"}],data:c.map(({min:e,max:r,item:t})=>{var l,a;return[i((l=t[3])!==null&&l!==void 0?l:Number.NaN),i((a=t[2])!==null&&a!==void 0?a:Number.NaN),t[1],i(e!=null?e:Number.NaN),i(r!=null?r:Number.NaN),N(t[0],o.language),y(t[4])]})});
