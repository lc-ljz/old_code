import p,{Loader as C}from"../../components/SamplePage/Audio.js";import f from"../../components/ChartPage.js";import e,{useCallback as h,useEffect as E,useMemo as R,useRef as j,useState as w}from"../../../web_modules/react.js";import x from"../../components/Content.js";import A from"../../components/Error.js";import T from"../../components/RunAside.js";import b from"../../components/Title.js";import S from"../../hooks/useTagFilter.js";import{useTranslation as k}from"../../../web_modules/react-i18next.js";const v=()=>{const{t:u}=k(["sample","common"]),r=j();E(()=>{const a=window.AudioContext||window.webkitAudioContext;return r.current=new a,()=>{var t;(t=r.current)===null||t===void 0||t.close()}},[]);const[n,l]=w(!0),{runs:s,tagsWithSingleRun:c,selectedRuns:m,onChangeRuns:i,loading:o}=S("audio",n),d=R(()=>e.createElement(T,{runs:s,selectedRuns:m,onChangeRuns:i,running:n,onToggleRunning:l,loading:o}),[o,i,n,s,m]),g=h(({run:a,label:t})=>e.createElement(p,{audioContext:r.current,run:a,tag:t,running:n}),[n]);return e.createElement(e.Fragment,null,e.createElement(b,null,u("common:audio")," - ",u("common:sample")),e.createElement(x,{aside:d},!o&&!s.length?e.createElement(A,null):e.createElement(f,{items:c,renderChart:g,loader:e.createElement(C,null),loading:o})))};export default v;
