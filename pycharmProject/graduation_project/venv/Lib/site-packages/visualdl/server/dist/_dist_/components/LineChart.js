function E(e,i){if(e==null)return{};var t=L(e,i),o,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)o=a[r],!(i.indexOf(o)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,o)||(t[o]=e[o]))}return t}function L(e,i){if(e==null)return{};var t={},o=Object.keys(e),r,a;for(a=0;a<o.length;a++)r=o[a],!(i.indexOf(r)>=0)&&(t[r]=e[r]);return t}import*as g from"../utils/chart.js";import u,{useEffect as C,useImperativeHandle as k}from"../../web_modules/react.js";import{primaryColor as I}from"../utils/style.js";import P,{Wrapper as S,useChartTheme as T}from"../hooks/useECharts.js";import N from"../../web_modules/react-spinners/GridLoader.js";import m from"../../web_modules/lodash/defaultsDeep.js";import{formatTime as y}from"../utils/index.js";import{useTranslation as R}from"../../web_modules/react-i18next.js";export let XAxisType;(function(e){e.value="value",e.log="log",e.time="time"})(XAxisType||(XAxisType={}));export let YAxisType;(function(e){e.value="value",e.log="log"})(YAxisType||(YAxisType={}));const W=u.forwardRef(({options:e,data:i,title:t,loading:o,zoom:r,className:a,onInit:b},x)=>{const{i18n:c}=R(),{ref:j,echart:l,wrapper:O,saveAsImage:_}=P({loading:!!o,zoom:r,autoFit:!0,onInit:b}),h=T();return k(x,()=>({restore:()=>{l==null||l.dispatchAction({type:"restore"})},saveAsImage:()=>{_(t)}})),C(()=>{var f,d;const{color:$,colorAlt:D,series:w}=g,A=E(g,["color","colorAlt","series"]);let s=m({title:{text:t!=null?t:""},series:i==null?void 0:i.map(n=>{var p,v;return m({showSymbol:((p=n==null||(v=n.data)===null||v===void 0?void 0:v.length)!==null&&p!==void 0?p:0)<=1,type:"line"},n,w)})},e,h,A);((f=s)===null||f===void 0?void 0:f.xAxis).type==="time"&&(s=m({xAxis:{axisLabel:{formatter:n=>y(n,c.language,"LTS")}}},s)),((d=s)===null||d===void 0?void 0:d.yAxis).type==="time"&&(s=m({yAxis:{axisLabel:{formatter:n=>y(n,c.language,"LTS")}}},s)),l==null||l.setOption(s,{notMerge:!0})},[e,i,t,h,c.language,l]),u.createElement(S,{ref:O,className:a},!l&&u.createElement("div",{className:"loading"},u.createElement(N,{color:I,size:"10px"})),u.createElement("div",{className:"echarts",ref:j}))});export default W;
