import P from"../components/ChartPage.js";import e,{useCallback as q,useEffect as I,useMemo as x,useState as o}from"../../web_modules/react.js";import Q,{Loader as X}from"../components/ScalarPage/ScalarChart.js";import{XAxis as N,parseSmoothing as y,sortingMethod as T}from"../resource/scalar/index.js";import{AsideSection as d}from"../components/Aside.js";import f from"../components/Checkbox.js";import $ from"../components/Content.js";import z from"../components/Error.js";import s from"../components/Field.js";import B from"../components/RunAside.js";import G from"../components/Select.js";import H from"../components/Slider.js";import J from"../components/TimeModeSelect.js";import K from"../components/Title.js";import{rem as v}from"../utils/style.js";import U from"../../web_modules/styled-components.js";import W from"../hooks/useLocalStorage.js";import Y from"../hooks/useQuery.js";import Z from"../hooks/useTagFilter.js";import{useTranslation as ee}from"../../web_modules/react-i18next.js";const te=U.div.withConfig({displayName:"scalar__TooltipSortingDiv",componentId:"sc-1m6klyq-0"})(["margin-top:",";display:flex;align-items:center;>:last-child{margin-left:",";flex-shrink:1;flex-grow:1;}"],v(20),v(20)),oe=()=>{const{t}=ee(["scalar","common"]),p=Y(),[r,b]=o(!0),{runs:h,tags:w,selectedRuns:S,onChangeRuns:E,loading:l}=Z("scalar",r),[C,j]=W("scalar_smoothing"),R=x(()=>p.smoothing!=null?y(p.smoothing):y(C),[p.smoothing,C]),[n,k]=o(R);I(()=>j(String(n)),[n,j]);const[a,A]=o(N.Step),[m,M]=o(T[0]),[i,F]=o(!1),[c,L]=o(!1),[u,_]=o(!1),O=x(()=>e.createElement(B,{runs:h,selectedRuns:S,onChangeRuns:E,running:r,onToggleRunning:b,loading:l},e.createElement(d,null,e.createElement(s,null,e.createElement(f,{value:i,onChange:F},t("scalar:ignore-outliers"))),e.createElement(s,null,e.createElement(f,{value:u,onChange:_},t("scalar:show-most-value"))),e.createElement(te,null,e.createElement("span",null,t("scalar:tooltip-sorting")),e.createElement(G,{list:T.map(g=>({label:t(`scalar:tooltip-sorting-value.${g}`),value:g})),value:m,onChange:M}))),e.createElement(d,null,e.createElement(s,{label:t("scalar:smoothing")},e.createElement(H,{min:0,max:.99,step:.01,value:n,onChangeComplete:k})),e.createElement(s,null,e.createElement(f,{value:c,onChange:L},t("scalar:smoothed-data-only")))),e.createElement(d,null,e.createElement(s,{label:t("scalar:x-axis")},e.createElement(J,{value:a,onChange:A})))),[i,l,E,r,h,S,u,c,n,t,m,a]),D=q(({label:g,runs:V})=>e.createElement(Q,{runs:V,tag:g,smoothing:n,xAxis:a,sortingMethod:m,outlier:i,smoothedOnly:c,showMostValue:u,running:r}),[n,a,m,i,u,c,r]);return e.createElement(e.Fragment,null,e.createElement(K,null,t("common:scalar")),e.createElement($,{aside:O},!l&&!h.length?e.createElement(z,null):e.createElement(P,{items:w,renderChart:D,loader:e.createElement(X,null),loading:l})))};export default oe;
