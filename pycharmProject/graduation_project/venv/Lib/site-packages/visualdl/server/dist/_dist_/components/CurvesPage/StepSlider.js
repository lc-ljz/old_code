import i,{useEffect as d,useState as p}from"../../../web_modules/react.js";import{ellipsis as c,size as f,transitionProps as b}from"../../utils/style.js";import u from"../Field.js";import g from"../RangeSlider.js";import{TimeType as o}from"../../resource/curves/index.js";import{format as S}from"../../../web_modules/d3-format.js";import{formatTime as v}from"../../utils/index.js";import a from"../../../web_modules/styled-components.js";import{useTranslation as x}from"../../../web_modules/react-i18next.js";const y=S(".2f"),_=a.div.withConfig({displayName:"StepSlider__TimeDisplay",componentId:"sc-1ib91au-0"})(["color:var(--text-lighter-color);font-size:0.857142857em;padding-left:1.666666667em;margin-bottom:0.416666667em;",""],b("color")),h=a.span.withConfig({displayName:"StepSlider__Label",componentId:"sc-1ib91au-1"})(["display:inline-block;padding-left:1.428571429em;position:relative;"," &::before{content:'';display:block;"," background-color:",";border-radius:50%;position:absolute;left:0;top:50%;transform:translateY(-50%);}"],c(),f("0.857142857em","0.857142857em"),t=>t.color),j=a(g).withConfig({displayName:"StepSlider__FullWidthRangeSlider",componentId:"sc-1ib91au-2"})(["width:100%;"]),r={[o.WallTime]:"wallTimes",[o.Relative]:"relatives",[o.Step]:"steps"},w={[o.WallTime]:(t,{i18n:e})=>v(t,e.language),[o.Relative]:t=>`${y(t)} ms`,[o.Step]:(t,{t:e})=>`${e("common:time-mode.step")} ${t}`},T=({onChange:t,run:e,type:s})=>{const n=x("common"),[l,m]=p(e.index);return d(()=>m(e.index),[e.index]),i.createElement(u,{label:i.createElement(h,{color:e.colors[0],title:e.label},e.label)},i.createElement(_,null,e[r[s]][l]==null?"...":w[s](e[r[s]][l],n)),i.createElement(j,{min:0,max:e.steps.length?e.steps.length-1:0,step:1,value:l,onChange:m,onChangeComplete:()=>t==null?void 0:t(l)}))};export default T;
