function n(h,i,t){return i in h?Object.defineProperty(h,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):h[i]=t,h}function r(h,i){if(h.startsWith("rgb")){const o=h.replace(/^rgba?\(|\)$/g,""),[c,d,v,g="1"]=o.split(",").map(l=>l.trim());return`rgba(${c}, ${d}, ${v}, ${Number.parseFloat(g.trim())*i})`}let t=h.replace("#","");t.length===3&&(t=`${t[0]}${t[0]}${t[1]}${t[1]}${t[2]}${t[2]}`);const e=parseInt(t.substring(0,2),16),s=parseInt(t.substring(2,4),16),a=parseInt(t.substring(4,6),16);return`rgba(${e}, ${s}, ${a}, ${i})`}export default class p{constructor(i,t){n(this,"container",void 0),n(this,"canvas",void 0),n(this,"width",void 0),n(this,"height",void 0),this.container=i,this.width=t.width,this.height=t.height,this.canvas=this.initCanvas(),this.container.appendChild(this.canvas)}initCanvas(){const i=document.createElement("canvas"),t=window.devicePixelRatio||1;return i.width=this.width*t,i.height=this.height*t,i.style.width=`${this.width}px`,i.style.height=`${this.height}px`,i.style.position="absolute",i.style.top="0",i.style.left="0",i.style.pointerEvents="none",i}render(i){var t;this.clear();const e=(t=this.canvas)===null||t===void 0?void 0:t.getContext("2d");e&&(e.miterLimit=2,e.textBaseline="middle",i.forEach(s=>{!s.text||(e.fillStyle=r(s.fillColor,s.opacity),e.strokeStyle=r(s.strokeColor,s.opacity),e.font=`${s.fontSize}px roboto`,e.lineWidth=3,e.strokeText(s.text,s.x,s.y),e.lineWidth=6,e.fillText(s.text,s.x,s.y))}))}clear(){var i;const t=(i=this.canvas)===null||i===void 0?void 0:i.getContext("2d");if(t){const e=window.devicePixelRatio||1;t.clearRect(0,0,this.width*e,this.height*e)}}setSize(i,t){if(this.width=i,this.height=t,this.canvas){const e=window.devicePixelRatio||1;this.canvas.width=this.width*e,this.canvas.height=this.height*e,this.canvas.style.width=`${this.width}px`,this.canvas.style.height=`${this.height}px`}}dispose(){this.canvas&&(this.container.removeChild(this.canvas),this.canvas=null)}}
