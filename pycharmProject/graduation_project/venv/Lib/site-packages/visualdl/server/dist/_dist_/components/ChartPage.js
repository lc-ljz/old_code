import T from"../../__snowpack__/env.js";import.meta.env=T;import t,{useCallback as I,useEffect as V,useMemo as p,useState as w}from"../../web_modules/react.js";import{Trans as x,useTranslation as A}from"../../web_modules/react-i18next.js";import{headerHeight as z,link as B,rem as a,transitionProps as K}from"../utils/style.js";import _ from"./ChartCollapse.js";import{ChartCollapseTitle as L}from"./Loader/ChartPage.js";import O from"./Pagination.js";import U from"./SearchInput.js";import W from"../../web_modules/lodash/groupBy.js";import d from"../../web_modules/styled-components.js";import H from"../hooks/useSearchValue.js";const M=import.meta.env.SNOWPACK_PUBLIC_PATH,$=d(O).withConfig({displayName:"ChartPage__StyledPagination",componentId:"sc-24xkc5-0"})(["margin-top:",";"],a(20)),R=d.div.withConfig({displayName:"ChartPage__Wrapper",componentId:"sc-24xkc5-1"})(["display:flex;flex-wrap:wrap;justify-content:flex-start;align-items:stretch;align-content:flex-start;margin-bottom:-",";> *{margin:0 "," "," 0;flex-shrink:0;flex-grow:0;&.maximized{margin-right:0;}}"],a(20),a(20),a(20)),F=d.div.withConfig({displayName:"ChartPage__Search",componentId:"sc-24xkc5-2"})(["width:",";margin-bottom:",";"],a(280),a(16)),j=d.div.withConfig({displayName:"ChartPage__Empty",componentId:"sc-24xkc5-3"})(["width:100%;text-align:center;font-size:",";color:var(--text-lighter-color);line-height:",";height:",";padding:"," 0 ",";background-color:var(--background-color);background-image:url(",");background-repeat:no-repeat;background-position:calc(50% + ",") ",";background-size:"," ",";"," ",""],a(16),a(24),o=>{var r;return(r=o.height)!==null&&r!==void 0?r:"auto"},a(320),a(70),`${M}/images/empty.svg`,a(25),a(70),a(280),a(244),K(["color","background-color"]),B),q=({items:o,loading:r,loader:v,renderChart:u,className:S})=>{const{t:s}=A("common"),[i,E]=w(1),f=12,[b,k]=w(""),m=H(b),l=p(()=>{try{var e;const n=new RegExp(m);return(e=o==null?void 0:o.filter(c=>n.test(c.label)))!==null&&e!==void 0?e:[]}catch(n){return[]}},[o,m]),y=p(()=>{var e;return(e=l==null?void 0:l.slice((i-1)*f,i*f))!==null&&e!==void 0?e:[]},[l,i]);V(()=>{E(1)},[m]);const C=p(()=>Object.entries(W(o!=null?o:[],e=>e.label.split("/")[0])).sort(([e],[n])=>{const c=e.toUpperCase(),g=n.toUpperCase();return c<g?-1:c>g?1:0}),[o]),P=p(()=>Math.ceil(l.length/f),[l]),h=I((e,n)=>t.createElement(R,null,r?v:e.length?e.map((c,g)=>t.createElement(t.Fragment,{key:c.id||c.label},u==null?void 0:u(c,g))):t.createElement(j,{height:a(500)},n?t.createElement(x,{i18nKey:"common:search-empty"},"Nothing found. Please try again with another word.",t.createElement("br",null),"Or you can ",t.createElement("a",{onClick:()=>k("")},"see all charts"),"."):s("common:empty"))),[r,s,v,u]),N=p(()=>r?Array.from({length:3}).map((e,n)=>t.createElement(_,{key:n,title:t.createElement(L,null),opened:!n},h([]))):m?t.createElement(_,{title:s("common:search-result"),total:l.length},h(y,!0),y.length?t.createElement($,{page:i,total:P,onChange:E}):null):C.length?C.map((e,n)=>t.createElement(_,{title:e[0],key:e[0],total:e[1].length,opened:n===0},h(e[1]))):t.createElement(j,{height:`calc(100vh - ${z} - ${a(96)})`},t.createElement(x,{i18nKey:"common:unselected-empty"},"Nothing selected.",t.createElement("br",null),"Please select display data from right side.")),[C,r,l.length,i,y,m,s,P,h]);return t.createElement("div",{className:S},t.createElement(F,null,t.createElement(U,{placeholder:s("common:search-tags"),rounded:!0,value:b,onChange:e=>k(e)})),N)};export default q;
