import V,{useCallback as u,useMemo as v,useState as k}from"../../web_modules/react.js";import{height as B,padding as P}from"./Input.js";import{rem as E,size as W,transitionProps as O}from"../utils/style.js";import F from"../../web_modules/bignumberjs.js";import D from"./RangeSlider.js";import _ from"../../web_modules/styled-components.js";const U=_.div.withConfig({displayName:"Slider__Wrapper",componentId:"sc-1jkwmza-0"})(["display:flex;align-items:center;"]),Y=_.input.withConfig({displayName:"Slider__Input",componentId:"sc-1jkwmza-1"})(["",";line-height:",";display:inline-block;outline:none;padding:",";"," border:none;border-bottom:1px solid var(--border-color);text-align:center;background-color:transparent;color:var(--text-color);caret-color:var(--text-color);&:hover,&:focus{border-bottom-color:var(--border-focused-color);}"],W(B,E(52)),B,P,O(["border-color","color","caret-color"])),A=_(D).withConfig({displayName:"Slider__FullWidthRangeSlider",componentId:"sc-1jkwmza-2"})(["flex-grow:1;margin-right:",";"],E(20)),H=({onChange:o,onChangeComplete:i,value:w,min:s,max:m,step:p,steps:f})=>{const t=v(()=>{var e;return(e=f==null?void 0:f.sort())!==null&&e!==void 0?e:[]},[f]),I=v(()=>t.length?0:s!=null?s:0,[s,t]),N=v(()=>t.length?t.length-1:m!=null?m:1,[m,t]),b=v(()=>t.length?1:p!=null?p:1,[p,t]),g=u(e=>new F(e).dividedBy(b).integerValue(F.ROUND_HALF_UP).multipliedBy(b).toNumber(),[b]),S=u(e=>{if(t.length){let r=Number.NaN,n=Number.POSITIVE_INFINITY;for(let l=0;l<t.length;l++){const a=Math.abs(t[l]-e);n>a&&(n=a,r=t[l])}return r}return g(e)},[g,t]),y=u(e=>{if(t.length){let r=-1,n=Number.POSITIVE_INFINITY;for(let l=0;l<t.length;l++){const a=Math.abs(t[l]-e);n>a&&(n=a,r=l)}return r}return g(e)},[g,t]),d=u(e=>t.length?t[e]:e,[t]),[c,x]=k(y(w)),[R,h]=k(S(w)+""),M=u(e=>{x(e);const r=d(e);h(r+""),o==null||o(r)},[d,o]),T=u(()=>{i==null||i(d(c))},[c,i,d]),z=u(e=>{h(e);const r=Number.parseFloat(e);if(r<I||r>N||Number.isNaN(r))return;x(y(r));const n=S(r);o==null||o(n),i==null||i(n)},[I,N,y,S,o,i]),j=u(()=>{h(d(c)+"")},[d,c]);return V.createElement(U,null,V.createElement(A,{min:I,max:N,step:b,value:c,onChange:M,onChangeComplete:T}),V.createElement(Y,{type:"text",value:R,onChange:e=>z(e.currentTarget.value),onBlur:j,onKeyDown:e=>e.key==="Enter"&&j()}))};export default H;
