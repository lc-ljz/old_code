let M=o=>o,j;import i,{useCallback as p,useEffect as R,useMemo as g,useState as $}from"../../web_modules/react.js";import{borderRadius as B,borderRadiusShortHand as E,css as W,ellipsis as C,em as f,math as D,sameBorder as H,size as _,transitionProps as u,zIndexes as P}from"../utils/style.js";import F from"./Checkbox.js";import G from"./Icon.js";import d from"../../web_modules/styled-components.js";import J from"../hooks/useClickOutside.js";import{useTranslation as K}from"../../web_modules/react-i18next.js";import Q from"../../web_modules/lodash/without.js";export const padding=f(10),height=f(36);const U=d.div.withConfig({displayName:"Select__Wrapper",componentId:"sc-1rc4rcq-0"})(["height:",";line-height:calc("," - 2px);max-width:100%;display:inline-block;position:relative;background-color:var(--background-color);"," "," "," &:hover{border-color:var(--border-focused-color);}"],height,height,H({radius:!0}),o=>o.opened?E("bottom","0"):"",u("border-color","background-color")),X=d.div.withConfig({displayName:"Select__Trigger",componentId:"sc-1rc4rcq-1"})(["padding:",";display:inline-flex;"," justify-content:space-between;align-items:center;cursor:pointer;"," ",""],padding,_("100%"),o=>o.selected?"":"color: var(--text-lighter-color)",u("color")),Y=d(G).withConfig({displayName:"Select__TriggerIcon",componentId:"sc-1rc4rcq-2"})([""," text-align:center;display:block;flex-shrink:0;transform:rotate(","deg) scale(",");",""],_(f(14)),o=>o.opened?"180":"0",10/14,u("transform")),Z=d.span.withConfig({displayName:"Select__Label",componentId:"sc-1rc4rcq-3"})(["flex-grow:1;padding-right:",";",""],f(10),C()),V=d.div.withConfig({displayName:"Select__List",componentId:"sc-1rc4rcq-4"})(["position:absolute;top:100%;width:calc(100% + 2px);max-height:",";overflow-x:hidden;overflow-y:auto;left:-1px;padding:"," 0;border:inherit;border-top-color:var(--border-color);"," display:",";z-index:",";line-height:1;background-color:inherit;box-shadow:0 5px 6px 0 rgba(0,0,0,0.05);"," ",""],D(`4.35 * ${height} + 2 * ${padding}`),padding,E("bottom",B),o=>o.opened?"block":"none",P.component,u(["border-color","color"]),o=>o.empty?{color:"var(--text-lighter-color)",textAlign:"center"}:""),L=W(j||(j=M`
    display: block;
    cursor: pointer;
    padding: 0 ${0};
    ${0}
    line-height: ${0};
    ${0}

    &:hover {
        background-color: var(--background-focused-color);
    }
`),padding,_(height,"100%"),height,u(["color","background-color"])),ee=d.div.withConfig({displayName:"Select__ListItem",componentId:"sc-1rc4rcq-5"})([""," "," ",""],C(),L,o=>o.selected?"color: var(--select-selected-text-color);":""),oe=d(F).withConfig({displayName:"Select__MultipleListItem",componentId:"sc-1rc4rcq-6"})([""," display:flex;align-items:center;"],L),te=({list:o,value:s,placeholder:k,multiple:c,className:N,onChange:n})=>{const{t:v}=K("common"),[a,I]=$(!1),q=p(()=>I(!a),[a]),h=p(()=>I(!1),[]),[l,y]=$(c?Array.isArray(s)?s:[]:s);R(()=>y(c?Array.isArray(s)?s:[]:s),[c,s]);const b=g(()=>!!(c?l&&l.length!==0:l),[c,l]),A=p(e=>{y(e),n==null||n(e),h()},[h,n]),O=p((e,r)=>{let t=l;r?t.includes(e)||(t=[...t,e]):t.includes(e)&&(t=Q(t,e)),y(t),n==null||n(t)},[l,n]),T=J(h),m=g(()=>{var e;return(e=o==null?void 0:o.map(r=>["string","number"].includes(typeof r)?{value:r,label:r+""}:r))!==null&&e!==void 0?e:[]},[o]),S=g(()=>m.length===0,[m]),x=p(e=>{var r,t;return(r=(t=m.find(z=>z.value===e))===null||t===void 0?void 0:t.label)!==null&&r!==void 0?r:""},[m]),w=g(()=>b?c?l.map(x).join(" / "):x(l):k||v("common:select"),[c,l,x,b,k,v]);return i.createElement(U,{ref:T,opened:a,className:N},i.createElement(X,{onClick:q,selected:b,title:b&&w?String(w):""},i.createElement(Z,null,w),i.createElement(Y,{opened:a,type:"chevron-down"})),i.createElement(V,{opened:a,empty:S},S?v("common:empty"):m.map((e,r)=>c?i.createElement(oe,{value:l.includes(e.value),key:r,title:e.label,size:"small",onChange:t=>O(e.value,t)},e.label):i.createElement(ee,{selected:e.value===l,key:r,title:e.label,onClick:()=>A(e.value)},e.label))))};export default te;
